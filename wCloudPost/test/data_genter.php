<?php

class LocalHttpClient
{
    public static function ins()
    {
       $conf         = GHttpConf::local_svc($_SERVER['DOMAIN'], new logger("unittest") , "unittest");
       $conf->port   = 80;
       $client       = new GHttpClient($conf);

       return $client;
    }
}

class DataGenter
{
    public static $IMSI  = 0; 
    public static $SEQNO = 0;
    public static $MOBLE = "36V,12A";
    public static $MOBILENO = 0;
    public static $CONF = array();
    public static $DATA = "";
    public static $TIME = ""; 

    public static function getIMSI()
    {
        $prefix = time();
        $suffix = rand(100000, 999999);

        return $prefix .  $suffix;
    }

    public static function getSeqno() 
    {
        $prefix = time();
        $suffix = rand(10000, 99999);

        return $prefix . $suffix;
    } 

    public static function getMobileno() 
    {
        $prefix = 158;
        $suffix = rand(10000000, 99999999);

        return $prefix . $suffix;
    } 

    public static function getData() 
    {
   
       $a = array();
       $a['c']  = 1;
      // $a['lo'] = mt_rand(116300000,116470000)/1000000;
      // $a['la'] = mt_rand(39800000,39970000)/1000000;
      // $a['b']  = mt_rand(0,100);
      // $a['u']  = mt_rand(360,480)/10;
       $a['a']  = 1.14;
      // $a['t']  = date("Y-m-d H:i:s", time());
       $a['lo'] = "116.236030";
       $a['la'] = "40.050125";
       $b[]  = $a;
       $c    = json_encode($b);
       $data = UrlSafeBase::URLSafeBase64Encode($c);    

       return $data;
  
    } 

    public static function getSign() 
    {
        //$conf = self::$CONF;
        //$key  = $conf['sk'];
        $key = '67b6a57a0ee0aaaf0b8032b056fe140686bedd919657e1bb5f13b2e6c05c43ba';
        // $data = self::$DATA;
        $data = "";
        $arr = array(0x01, 0x8a, 0xb0, 0x8a, 0x4c, 0x52, 0x5c, 0xb6, 0x8a, 0x0c, 0x22, 0x38, 0x4e, 0x5b, 0xb1, 0x8a, 0x2e, 0xb0, 0x17, 0x0a, 0x4c, 0x50, 0x49, 0xb0, 0x8a, 0xb1, 0xa6, 0x28, 0x64, 0x32, 0x0c, 0xb5, 0xa6, 0x0b, 0x74, 0x17, 0x3c, 0x1e, 0xa6, 0x32, 0xa6, 0xb0, 0xa6, 0xb0, 0xa6, 0x0e, 0x3b, 0x1e, 0x50, 0x50);
        foreach ($arr as $v) {
            $data .= chr($v);
        }

        $sign = md5($data .":". $key);

        return $sign;
    }

    public static function getSign1()
    {
        $key = '67b6a57a0ee0aaaf0b8032b056fe140686bedd919657e1bb5f13b2e6c05c43ba';
        $data = "";
        $arr = array(0xb2, 0x8a, 0xb0, 0x8a, 0x4c, 0x52, 0x5c, 0xb6, 0x8a, 0x0c, 0x22, 0x38, 0x4e, 0x5b, 0xb1, 0x8a, 0x2e, 0xb0, 0x45, 0xb0, 0x0a, 0x0f, 0x2f, 0xb0, 0x8a, 0xb3, 0xa6, 0x2e, 0xb0, 0xa6, 0xb1, 0xa6, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xa6, 0x1a, 0x25, 0xb3, 0xfc, 0x0a, 0x14, 0xb8, 0xfc, 0x0c, 0x32, 0xb1, 0xa6, 0x31, 0xfc, 0x54, 0xfc, 0x12, 0xa6, 0x32, 0xa6, 0xb0, 0xa6, 0xb0, 0xa6, 0x15, 0x2f, 0x8a, 0xb3, 0xa6, 0x2e, 0xb0, 0xa6, 0xb1, 0xa6, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xa6, 0x1a, 0x25, 0xb3, 0xfc, 0x0a, 0x14, 0xb8, 0xfc, 0x0c, 0x32, 0xb1, 0xa6, 0x31, 0xfc, 0x54, 0xfc, 0x12, 0xa6, 0x32, 0xa6, 0xb0, 0xa6, 0xb0, 0xa6, 0x15, 0x39, 0x8a, 0xb3, 0xa6, 0x2e, 0xb0, 0xa6, 0xb1, 0xa6, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xa6, 0x1a, 0x25, 0xb3, 0xfc, 0x0a, 0x14, 0xb8, 0xfc, 0x0c, 0x32, 0xb1, 0xa6, 0x31, 0xfc, 0x54, 0xfc, 0x12, 0xa6, 0x32, 0xa6, 0xb0, 0xa6, 0xb0, 0xa6, 0x15, 0x43, 0x8a, 0xb3, 0xa6, 0x2e, 0xb0, 0xa6, 0xb1, 0xa6, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xa6, 0x1a,0x25, 0xb3, 0xfc, 0x0a, 0x14, 0xb8, 0xfc, 0x0c, 0x32, 0xb1, 0xa6, 0x31, 0xfc, 0x54, 0xfc, 0x12, 0xa6, 0x32, 0xa6, 0xb0, 0xa6, 0xb0, 0xa6, 0x15, 0x4d, 0x8a, 0xb3, 0xa6, 0x2e, 0xb0, 0xa6, 0xb1, 0xa6, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xfc, 0x2b, 0x16, 0xa6, 0x1a, 0x25, 0xb3, 0xfc, 0x0a, 0x14, 0xb8, 0xfc, 0x0c, 0x32, 0xb1, 0xa6, 0x31, 0xfc, 0x54, 0xfc, 0x12, 0xa6, 0x32, 0xa6, 0xb0, 0xa6, 0xb0, 0xa6, 0x15, 0x57);

        foreach ($arr as $v) {
            $data .= chr($v);
        }

        $sign = md5($data . ":" . $key);

        return $sign;
    }

    public static function getData1()                   
    {                                                   
        $list = array();                                 
        $list['c']    = 3;                               
        $list['mcc']  = 460;                             
        $list['mnc']  = 0;                               
        $list['lac']  = "1095|1095|1097|10a8|1095|1095"; 
        $list['cell'] = "abcb|1ebc|ad55|d580|2cb6|a864"; 
        $list['q']    = "12|54|05|23|09|10";             
        $list['b']    = 0;                               
        $list['t']    = date("Y-m-d H:i:s", time());     
        $c[]          = $list;                           
        $d    = json_encode($c);
        $data = UrlSafeBase::URLSafeBase64Encode($d);    

        return $data;                                    
    }                                                   

    public static function getSignAlarm()
    {
        $s = 1;
        $conf = self::$CONF;
        //$key  = $conf['sk'];
        $key = '67b6a57a0ee0aaaf0b8032b056fe140686bedd919657e1bb5f13b2e6c05c43ba';
        $t = date("Y-m-d H:i:s" ,time());
        DataGenter::$TIME = $t;
        $sign = md5($s.":".$t.":".$key);

        return $sign; 
    }
}
